(()=>{"use strict";function e(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function t(e,t,i="beforeend"){t.insertAdjacentElement(i,e.getElement())}const i=[{id:1,description:"Chamonix, is a beautiful city, a true asian pearl, with crowded streets.",name:"Chamonix",pictures:[{src:"http://picsum.photos/300/200?r=0.0762563005163317",description:"Chamonix parliament building"}]},{id:2,description:"Moscow, is a beautiful city, a true asian pearl, with crowded streets.",name:"Moscow",pictures:[{src:"http://picsum.photos/300/200?r=0.0762563005163317",description:"Moscow parliament building"}]},{id:3,description:"Minsk, is a beautiful city, a true asian pearl, with crowded streets.",name:"Minsk",pictures:[]}],n=[{type:"taxi",offers:[{id:1,title:"taxi offer 1",price:120},{id:2,title:"taxi offer 2",price:220},{id:3,title:"taxi offer 3",price:320},{id:4,title:"taxi offer 4",price:420},{id:5,title:"taxi offer 5",price:520}]},{type:"bus",offers:[{id:1,title:"bus offer 1",price:130},{id:2,title:"bus offer 2",price:230},{id:3,title:"bus offer 3",price:330},{id:4,title:"bus offer 4",price:430},{id:5,title:"bus offer 5",price:530}]},{type:"train",offers:[{id:1,title:"train offer 1",price:140},{id:2,title:"train offer 2",price:240},{id:3,title:"train offer 3",price:340},{id:4,title:"train offer 4",price:440},{id:5,title:"train offer 5",price:540}]},{type:"ship",offers:[{id:1,title:"ship offer 1",price:150},{id:2,title:"ship offer 2",price:250},{id:3,title:"ship offer 3",price:350},{id:4,title:"ship offer 4",price:450},{id:5,title:"ship offer 5",price:550}]},{type:"drive",offers:[{id:1,title:"drive offer 1",price:160},{id:2,title:"drive offer 2",price:260},{id:3,title:"drive offer 3",price:360},{id:4,title:"drive offer 4",price:460},{id:5,title:"drive offer 5",price:560}]},{type:"flight",offers:[{id:1,title:"flight offer 1",price:170},{id:2,title:"flight offer 2",price:270},{id:3,title:"flight offer 3",price:370},{id:4,title:"flight offer 4",price:470},{id:5,title:"flight offer 5",price:570}]},{type:"check-in",offers:[{id:1,title:"check-in offer 1",price:180},{id:2,title:"check-in offer 2",price:280},{id:3,title:"check-in offer 3",price:380},{id:4,title:"check-in offer 4",price:480},{id:5,title:"check-in offer 5",price:580}]},{type:"sightseeing",offers:[{id:1,title:"sightseeing offer 1",price:190},{id:2,title:"sightseeing offer 2",price:290},{id:3,title:"sightseeing offer 3",price:390},{id:4,title:"sightseeing offer 4",price:490},{id:5,title:"sightseeing offer 5",price:590}]},{type:"restaurant",offers:[{id:1,title:"restaurant offer 1",price:100},{id:2,title:"restaurant offer 2",price:200},{id:3,title:"restaurant offer 3",price:300},{id:4,title:"restaurant offer 4",price:400},{id:5,title:"restaurant offer 5",price:500}]}],s=[{id:1,basePrice:1100,dateFrom:"2019-07-10T22:55:56.845Z",dateTo:"2019-07-11T11:22:13.375Z",destination:2,isFavorite:!1,offers:[4,5],type:"bus"},{id:2,basePrice:200,dateFrom:"2019-07-10T22:55:56.845Z",dateTo:"2019-07-11T11:22:13.375Z",destination:1,isFavorite:!0,offers:[16],type:"ship"},{id:3,basePrice:750,dateFrom:"2019-07-10T22:55:56.845Z",dateTo:"2019-07-11T11:22:13.375Z",destination:3,isFavorite:!1,offers:[],type:"drive"}];class r{getTemplate(){return'<form class="trip-events__trip-sort  trip-sort" action="#" method="get">\n    <div class="trip-sort__item  trip-sort__item--day">\n      <input id="sort-day" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-day">\n      <label class="trip-sort__btn" for="sort-day">Day</label>\n    </div>\n\n    <div class="trip-sort__item  trip-sort__item--event">\n      <input id="sort-event" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-event" disabled>\n      <label class="trip-sort__btn" for="sort-event">Event</label>\n    </div>\n\n    <div class="trip-sort__item  trip-sort__item--time">\n      <input id="sort-time" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-time">\n      <label class="trip-sort__btn" for="sort-time">Time</label>\n    </div>\n\n    <div class="trip-sort__item  trip-sort__item--price">\n      <input id="sort-price" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-price" checked>\n      <label class="trip-sort__btn" for="sort-price">Price</label>\n    </div>\n\n    <div class="trip-sort__item  trip-sort__item--offer">\n      <input id="sort-offer" class="trip-sort__input  visually-hidden" type="radio" name="trip-sort" value="sort-offer" disabled>\n      <label class="trip-sort__btn" for="sort-offer">Offers</label>\n    </div>\n  </form>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}const l=["taxi","bus","train","ship","drive","flight","check-in","sightseeing","restaurant"];class a{getTemplate(){return'<ul class="trip-events__list">\n    </ul>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}const o=e=>e.split(" ").join("_");class p{constructor(e,t,i){this.point=e,this.destination=t,this.offers=i}getTemplate(){return function(e,t,i){const n=i.find((t=>t.type===e.type)).offers,s=n.filter((t=>e.offers.includes(t.id))),r=t.find((t=>t.id===e.destination)),{name:a,description:p,pictures:c}=r||{},d=e.id;return`\n    <li class="trip-events__item">\n              <form class="event event--edit" action="#" method="post">\n                <header class="event__header">\n                  <div class="event__type-wrapper">\n                    <label class="event__type  event__type-btn" for="event-type-toggle-${d}">\n                      <span class="visually-hidden">Choose event type</span>\n                      <img class="event__type-icon" width="17" height="17" src="img/icons/flight.png" alt="Event type icon">\n                    </label>\n                    <input class="event__type-toggle  visually-hidden" id="event-type-toggle-${d}" type="checkbox">\n\n                    <div class="event__type-list">\n                      <fieldset class="event__type-group">\n                        <legend class="visually-hidden">Event type</legend>\n                        ${l.map((e=>{return`\n                        <div class="event__type-item">\n                          <input id="event-type-${e}-${d}" class="event__type-input  visually-hidden" type="radio" name="event-type" value="${e}">\n                          <label class="event__type-label  event__type-label--${e}" for="event-type-${e}-${d}">${t=e,`${t[0].toUpperCase()}${t.slice(1)}`}</label>\n                        </div>`;var t})).join("")}\n                    </fieldset>\n                    </div>\n                  </div>\n\n                  <div class="event__field-group  event__field-group--destination">\n                    <label class="event__label  event__type-output" for="event-destination-${d}">\n                      Flight\n                    </label>\n                    <input class="event__input  event__input--destination" id="event-destination-${d}" type="text"\n                    name="event-destination" value="${a||""}" list="destination-list-${d}">\n                    <datalist id="destination-list-${d}">\n                    ${t.map((e=>`<option value="${e.name}"></option>`)).join("")}\n                    </datalist>\n                  </div>\n\n                  <div class="event__field-group  event__field-group--time">\n                    <label class="visually-hidden" for="event-start-time-${d}">From</label>\n                    <input class="event__input  event__input--time" id="event-start-time-${d}" type="text" name="event-start-time" value="18/03/19 12:25">\n                    &mdash;\n                    <label class="visually-hidden" for="event-end-time-${d}">To</label>\n                    <input class="event__input  event__input--time" id="event-end-time-${d}" type="text" name="event-end-time" value="18/03/19 13:35">\n                  </div>\n\n                  <div class="event__field-group  event__field-group--price">\n                    <label class="event__label" for="event-price-${d}">\n                      <span class="visually-hidden">Price</span>\n                      &euro;\n                    </label>\n                    <input class="event__input  event__input--price" id="event-price-1" type="text" name="event-price" value="160">\n                  </div>\n\n                  <button class="event__save-btn  btn  btn--blue" type="submit">Save</button>\n                  <button class="event__reset-btn" type="reset">${d?"Delete":"Cancel"}</button>\n                  ${d?'<button class="event__rollup-btn" type="button">\n        <span class="visually-hidden">Open event</span>\n      </button>':""}\n                </header >\n  <section class="event__details">\n  ${n.length?`<section class="event__section  event__section--offers">\n      <h3 class="event__section-title  event__section-title--offers">Offers</h3>\n\n      <div class="event__available-offers">\n      ${n.map((e=>`<div class="event__offer-selector">\n          <input class="event__offer-checkbox  visually-hidden" id="event-offer-${o(e.title)}-${d}" type="checkbox"\n          name="event-offer-${o(e.title)}" ${s.map((e=>e.id)).includes(e.id)?"checked":""}>\n            <label class="event__offer-label" for="event-offer-${o(e.title)}-${d}">\n              <span class="event__offer-title">${e.title}</span>\n              &plus;&euro;&nbsp;\n              <span class="event__offer-price">${e.price}</span>\n            </label>\n        </div>`)).join("")}\n        </section>`:""}\n\n      ${r?`<section class="event__section  event__section--destination">\n      <h3 class="event__section-title  event__section-title--destination">Destination</h3>\n      <p class="event__destination-description">${p}</p>\n      ${c.length?`<div class="event__photos-container">\n          <div class="event__photos-tape">\n            ${c.map((e=>`<img class="event__photo" src="${e.src}" alt="${e.description}">`))}\n                    </div>\n                  </div>`:""}\n                </section>`:""}\n              </section>\n            </form >\n          </li >`}(this.point,this.destination,this.offers)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}class c{constructor(e,t,i){this.point=e,this.destination=t,this.offers=i}getTemplate(){return function(e,t,i){const{basePrice:n,isFavorite:s,type:r}=e,l=i.find((t=>t.type===e.type)).offers.filter((t=>e.offers.includes(t.id)));return`<li class="trip-events__item">\n    <div class="event">\n      <time class="event__date" datetime="2019-03-18">MAR 18</time>\n      <div class="event__type">\n        <img class="event__type-icon" width="42" height="42" src="img/icons/flight.png" alt="Event type icon">\n      </div>\n      <h3 class="event__title">${r} ${t.find((t=>t.id===e.destination)).name}</h3>\n      <div class="event__schedule">\n        <p class="event__time">\n          <time class="event__start-time" datetime="2019-03-18T12:25">12:25</time>\n          &mdash;\n          <time class="event__end-time" datetime="2019-03-18T13:35">13:35</time>\n        </p>\n        <p class="event__duration">01H 10M</p>\n      </div>\n      <p class="event__price">\n        &euro;&nbsp;<span class="event__price-value">${n}</span>\n      </p>\n      <h4 class="visually-hidden">Offers:</h4>\n      <ul class="event__selected-offers">\n      ${l.map((e=>`<li class="event__offer">\n        <span class="event__offer-title">${e.title}</span>\n        &plus;&euro;&nbsp;\n        <span class="event__offer-price">${e.price}</span>\n      </li>`)).join("")}\n      </ul>\n      <button class="event__favorite-btn ${s?"event__favorite-btn--active":""}" type="button">\n        <span class="visually-hidden">Add to favorite</span>\n        <svg class="event__favorite-icon" width="28" height="28" viewBox="0 0 28 28">\n          <path d="M14 21l-8.22899 4.3262 1.57159-9.1631L.685209 9.67376 9.8855 8.33688 14 0l4.1145 8.33688 9.2003 1.33688-6.6574 6.48934 1.5716 9.1631L14 21z"/>\n        </svg>\n      </button>\n      <button class="event__rollup-btn" type="button">\n        <span class="visually-hidden">Open event</span>\n      </button>\n    </div>\n  </li>`}(this.point,this.destination,this.offers)}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}}const d=document.querySelector(".trip-main"),f=document.querySelector(".trip-controls__filters"),v=document.querySelector(".trip-events");t(new class{getTemplate(){return'\n    <section class="trip-main__trip-info  trip-info">\n    <div class="trip-info__main">\n      <h1 class="trip-info__title">Amsterdam &mdash; Chamonix &mdash; Geneva</h1>\n\n      <p class="trip-info__dates">18&nbsp;&mdash;&nbsp;20 Mar</p>\n    </div>\n\n    <p class="trip-info__cost">\n      Total: &euro;&nbsp;<span class="trip-info__cost-value">1230</span>\n    </p>\n  </section>\n'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}},d,"afterbegin"),t(new class{getTemplate(){return'<div class="trip-main__trip-controls  trip-controls">\n  <div class="trip-controls__filters">\n    <h2 class="visually-hidden">Filter events</h2>\n    <form class="trip-filters" action="#" method="get">\n      <div class="trip-filters__filter">\n        <input id="filter-everything" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="everything">\n          <label class="trip-filters__filter-label" for="filter-everything">Everything</label>\n      </div>\n\n      <div class="trip-filters__filter">\n        <input id="filter-future" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="future">\n          <label class="trip-filters__filter-label" for="filter-future">Future</label>\n      </div>\n\n      <div class="trip-filters__filter">\n        <input id="filter-present" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="present">\n          <label class="trip-filters__filter-label" for="filter-present">Present</label>\n      </div>\n\n      <div class="trip-filters__filter">\n        <input id="filter-past" class="trip-filters__filter-input  visually-hidden" type="radio" name="trip-filter" value="past" checked>\n          <label class="trip-filters__filter-label" for="filter-past">Past</label>\n      </div>\n\n      <button class="visually-hidden" type="submit">Accept filter</button>\n    </form>\n  </div>\n</div>'}getElement(){return this.element||(this.element=e(this.getTemplate())),this.element}removeElement(){this.element=null}},f,"beforebegin");const _=new class{constructor(){this.points=[],this.offers=[],this.destinations=[]}init(){this.points=s,this.offers=n,this.destinations=i}getPoints(){return this.points}getOffers(){return this.offers}getDestinations(){return this.destinations}};_.init();const u=new class{constructor({container:e,pointModel:t}){this.bodyContainer=e,this.pointListComponent=new a,this.pointModel=t}init(){const e=this.pointModel.getPoints(),i=this.pointModel.getDestinations(),n=this.pointModel.getOffers();t(new r,this.bodyContainer),t(this.pointListComponent,this.bodyContainer),t(new p({basePrice:0,destination:0,isFavorite:!1,offers:[],type:l[0]},i,n),this.pointListComponent.getElement()),t(new p(e[2],i,n),this.pointListComponent.getElement());for(const s of e)t(new c(s,i,n),this.pointListComponent.getElement())}}({container:v,pointModel:_});u.init()})();
//# sourceMappingURL=bundle.8cea7e5cebe6b161b354.js.map